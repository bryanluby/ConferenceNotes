# WWDC 2018 Notes

## Table of Contents

- [Keynote](#keynote)
- [Platforms State of the Union](#platforms-state-of-the-union)
- [Whats New in Swift](#whats-new-in-swift)
- [Whats New in Cocoa Touch](#whats-new-in-cocoa-touch)
- [Whats New in ARKit 2](#whats-new-in-arkit-2)
- [Introducing Create ML](#introducing-create-ml)
- [Whats New in watchOS](#whats-new-in-watchos)
- [Whats New in Cocoa for macOS](#whats-new-in-cocoa-for-macos)
- [Introduction to Siri Shortcuts](#introduction-to-siri-shortcuts)

## Keynote

### iOS 12

#### Performance

- Doubling down on performance
- Same hardware compatibility as ios 11
- Faster app launching, keyboard showing, share sheet, photo ui showing

#### AR

- USDZ file format (Adobe will support on creative cloud)
- AR quick look
- Measure AR app
- ARKit 2
    - Improved face tracking
    - 3D object detection
    - Object persistence
    - Shared experiences (multi-user AR support)

#### Photos

- Search suggestions - Places search - Events search
- Multiple search criteria
- For you tab (similar to apple music)

#### Siri

- Shortcuts (triggered by voice phrase)
- Any app can expose quick actions to Siri
- Siri suggestions can launch shortcuts
- Shortcuts app - chain multiple shortcuts together with an editor
- Works on iPhone, iPad, Watch, HomePod

#### Apps

- News - Split screen iPad view
- Enhanced stock UI - Apple news integration - iPad version
- Voice memos - iPad - UX ehancements - iCloud Sync
- Apple Books (renamed from iBooks) - Redesign - New store
- Carplay - 3rd party navigation app support

#### Distraction Management

- Do not disturb - during bedtime - customized ending times
- Notifications - better control - Grouped notifications (app, topic, thread)
- Screen Time - Reports how you used the device over time - Can set app limits - Allowances for kids

#### Communication

- Messages 
    - New animoji 
    - Tongue detection 
    - Memoji (personal animoji)
    - New camera effects
- Facetime
    - Group FaceTime - Up to 32 simultaneous participants (iPhone, iPad, Mac)

### WatchOS 5

- 60% growth in 2017
- Heath & Fitness
    - Activity Competitions with friends
    - New workout types (Yoga, Hiking, Outdoor Run)
    - Automatic workout detection (both start and stop)
- Connectivity
    - Walkie-Talkie app
    - Siri watch face enhancements
        - Siri shortcuts available
        - 3rd party apps on the Siri watch face
        - Raise your wrist to talk directly to Siri
    - Interactive notifications
    - Web content in mail or messages
    - Podcasts - Siri support
- Apps
    - Background audio support for 3rd party apps
    - Student ID cards

### Apple TV

- Dolby Atmos support - Free upgrade
- Live sports and news
- Zero sign-on - If you are on your providers broadband network
- Earth aerial

### Mac

- macOS Mojave
- Dark mode (Xcode support)
- Dynamic desktop wallpaper
- Desktop stacks - Automatically sort desktop items into stacks (kind, date, or tag)
- Finder - Gallery view (good for previewing imagges, videos, documents)
- QuickLook - Markup integration (documents and videos)
- Screenshots - markup preview integration - video capture support
- Continuity Camera - integrate with iPhone camera
- Apps 
    - Apple news for the Mac
    - Stocks for the mac
    - Voice memos for the mac
    - Home for the mac
- Security & Privacy enhancements
    - Better sandboxing
    - Safari better do not track support
    - Fingerprinting prevention enhancements
- Mac App Store
    - Redesign similar to iOS App Store
    - Ratings and review API
- Create ML - Train directly on the mac (Swift support)
- Core ML 2 - 30% faster - 75% reduction in model size
- Sneek peek: Cross platform framework for bringing iOS apps to the mac coming in 2019

## Platforms State of the Union

### Misc

- Password AutoFill extension point for 3rd party developers
- Custom instruments - `os_signpost`
- Mojave is the last version with 32bit support
- Gatekeeper - More user consent for data access
- Enhanced runtime protections - Projection from code injection
- Notarized apps (Apple Notary Service) - Additional security protections for apps outside of app store
- Finder Quick Actions - Perform common actions on files without leaving the fineder
    - Provide custom actions with extensions
    - Action bundles with Automator
    - Works with touchbar
- UIKit apps for the mac demo
- Adopting dark mode - Can add dark variant assets to asset catalog

### Xcode 10

- Design tools
    - `NSGridView` support in interface builder
    - Object library is separate tool
- Source editing
    - Source control change bar indicators in the left sidebar
    - Swift refactoring shortcut additions
    - Multi cursor editing!
    - Better code completion
    - Source control rebase support
    - Source control support for Bitbucket and Gitlab
- Debugging
    - Device symbols download faster
    - Testing Improvements
        - Execute tests in parallel (Including UI tests)
        - Randomize order of test execution
- Swift 5
    - Focus on binary compatibility
    - Slimmed app downloads

### Machine Learning

- Improvements to vision
- New natural language API
- Core ML 2
    - Faster (Up to 4x), smaller (models may be significantly smaller than before), customizable
    - New batch api
    - Create ML - Natural language and image classification
    - Transfer learning

### Shortcuts

- Intents API for shortcuts
- A great shortcut is: based on key feature of your app and one that is repeated.
- Relevance API for shortcuts on the watch

### AR

- USDZ - Based on Universal scene description format
- Adobe project Aero (AR creation tool)
- ARKit 2
    - Improved face tracking (gaze, tongue)
    - Environment texturing
    - Image detection and tracking in 3 dimensions
    - 3D object detection and scanning
    - Save, load, and share maps
    - Multi user AR
    - SwiftShot open source AR game demo online

## Whats New in Swift

### Swift 4.2

- Faster builds - 2x for many projects
- Language improvements meant for better productivity
- SDK improvements for Swift
- Working towards binary compatibility
- Swift 5 early 2019
- Source compatibility with Swift 3, 4, 4.2
- Xcode 10 last release that will support Swift 3 compatibility mode
- Stop using debug with whole module compilation - Whole module prevents incremental builds - Use incremental builds instead
- Runtime Optimizations
    - Fewer retain/release calls behind the scenes
    - Optimizide String encoding
- Reduced code size - (Optimize for size optimization setting 10-30% smaller - 5% hit in performance) 
- Language improvements
    - Collection of Enum cases - `allCases` property
    - Conditional conformance - Equatable arrays when element is equatable
    - Synthesized equatable and hashable
    - New hashing algorithm improvements - Hashable protocol updates
    - SWift_deterministic_hashing build scheme variable
    - Random number generation improvements - `randomElement` property, `shoffled` method
    - Checking placform conditions - `canImport(UIKit)`- `#error`, `#warning` directives
    - `hasTargetEnvironment(simulator)`
    - Memory exclusivity checking

## Whats New in Cocoa Touch

### Framework Updates (Performance improvements)

- Scrolling CPU performance improvements - prefetch serialization (rather than concurrent)
- Memory - automatic backing store (default it iOS 12) - reduce the amount of memory used when drawing views
- Autolayout 
    - Faster by default - dependent sibling views and nested views are significantly faster
    - Simple best practices
- Swiftification of UIKit - Nesting: Types, constants, functions

### API enhancements

- Notifications - Interaction, Grouping, Settings UI
- Automatic passwords - save, generate passwords in app (includes setting custom password requirements)

### Siri shortcuts

- Expose common actions of your app to Siri - Proactive suggestions, voice phrase
- NSUserActivity
    - Set `eligibleForPrediction = true` to support shortcuts
- Siri Intents
    - Custom siri intents
    - API for creating shortcuts in app

## Whats New in ARKit 2

- ARKit: Tracking, Scene understanding, Rendering

### Saving and loading maps

- `ARWorldMap`
    - mapping of physical 3D space
    - Mutable list of named anchors
    - Raw feature points and extent
    - Serialization support
    - Persistence support
    - Multi-user support - (multipeer support)
- Faster initialization and plane detection
- More accurate extent and boundary
- Better tracking and plane detection
- Continuous autofocus
- New 4:3 video formats

### Environment Texturing

- Realistic rendering improvements: Position and orientation, scale, lighting, shadow, reflection of textures
- Automatic or manual setting for `environmentTexturing` property

### Image Tracking

- Images dont need to be static
- Tracks position and orientation for every frame
- Track multiple images simultaneously

### Object detection

- Detection of a known static 3D object
- Objects need to be scanned first
- Need to be well-textured, rigid, non-reflective

### Face Tracking enhancements

- Gaze tracking (left eye, right eye)
- Tongue tracking support

## Introducing Create ML

- Complete end-to-end Machine learning in Swift
- Images, Text, Tabular Data
- Typical Workflow
    - Define if the problem is best solved with ML
    - Collect data
    - Train model
    - Evaluate model - (Retrain or collect more data)
- Can create swift scripts for create ml workflows
- Natural language Text classification
    - Sentiment analysis
    - Spam analysis
    - Topic analysis
- Tabular Data (CSV, JSON)
    - `MLDataTable`
    - Can access columns with subscript
    - Column math support
    - Filter columns
    - `MLRegressor`high level classifier

## Whats New in watchOS

### Notifications

- Dynamic notifications from notification center and when they arrive
- Grouped notifications - thread id in payload
- Customized interactive notifications
- Can add gesture recognizers to notifications
- Critical alerts support
- Can send notifications directly to notification center quietly

### Watch Apps

- Audio playback
    - background audio mode
    - AVAudioPlayer and AVAudioEngine access
    - Now Playing support / playback controls
    - Audio controls
    - Now playing view in interface builder
- Simplified workout session support - WorkoutBuilder API - automatic relaunch after crash
- Siri Shortcuts support
    - User activity based or intent based
    - Relevance prodivers - When/where would the shortcut be relevant
    - Richest experience is with a watchOS app

## Whats New in Cocoa for macOS

### API Refinements

- String type updates - String enums -> String type - NS_Typed_Image
- Common prefixes - Lighter swift enum names
- Formalized protocols rather than informal protocols (categories on NSObject for grouping purposes)
- Direct ivar access deprecation
- Formal soft deprecation
- More secure coding adoption across Cocoa

### Dark Mode

- Link against 10.14
- Use appearance-sensitive colors (rather than hard coded ones)
- Use asset catalogs for custom colors - can then use dark variant
- Use template images and custom images in asset catalog
- Many desktop picture aware framework classes
- Control accent color support
- Content tint color for buttons and image views

### Layer backing

- 10.14 apps will no longer use window backing store - will use layer backed
- Multiple views can have a shared layer
- Font antialiasing improvements

### Misc

- User notifications available on macOS
- NSToolbar - centered item identifier for centering items
- NSGridView editing in Interface Builder
- New convenience factory methods for NSTextView
- Continuity Camera - Works by default with standard framework classes

## Introduction to Siri Shortcuts

- Expose key capabilities of your app to Siri

### Adopting shortcuts

- Define your shortcut
    - Accelerate a key function of your app
    - Pe of persistent interest to the user
    - Be executable at any time
- NSUserActivity - Good for simple shortcuts
    - Declare a type in info.plist
    - `isEligibleForPrediction`flag on user activities - Requires `iseligibleforsearch` as a prerequisite
- Intents - offer the best experience
    - Custom intents if the defaults dont apply
    - Specify shortcut types + support background execution
    - Need to use an intent extension for handling the shortcut flow inline with Siri rather than having to launch the app
- Donate shortcut (expose it)
- Handle shortcut when it is used
- `INRelevantShortcut` - expose to the Siri watch face - Works even if you dont have a watch app
- Developer setting in System settings to display donations on the lock screen

### Optimizing shortcuts

###  Privacy

### Media playback
